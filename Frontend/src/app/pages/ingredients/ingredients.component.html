<div class="container-fluid p-5">
  <div class="row p-2">

    <!-- Left Column -->
    <div class="col-5">

      <!-- Recipe Title -->
      <h2 class="fw-bold px-3 pt-2 pb-3" style="
          font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        ">
        {{recipeName}}
      </h2>

      <!-- Chef Image and Name -->
      <div class="d-flex align-items-center mt-3 px-3">
        <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png" alt="Profile"
          class="rounded-circle" width="40" height="40" draggable="false" />
        <p class="ms-3 fs-5 fw-bold mb-0">{{chefName}}</p>
      </div>

      <!-- Recipe Description -->
      <p class="m-3 fs-5">
        {{recipedoc}}
      </p>

      <!-- Start Cooking Button -->
      <button class="btn border border-1 m-3 px-3 py-2 rounded-5 text-light" style="background-color: #00b96d;"
        (click)="startCook()">
        <i class="fa-solid fa-book pe-1"></i> Let's Cook
      </button>

      <!-- Ingredients Section -->
      <h3 class="fw-bold px-3 pt-5 pb-3" style="
          font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        ">
        Ingredients
      </h3>
      <ul class="list-group list-group-flush ms-3">
        <li class="list-group-item" *ngFor="let ingredient of recipeIngredients">
          <div class="row ms-1">
            <div class="col">
              <p>{{ingredient.ingredient}}</p>
            </div>
            <div class="col d-flex justify-content-end">
              <p class="pe-3">{{ingredient.quantity}}</p>
              <input type="checkbox" class="form-check-input" style="transform: scale(1.5);" />
            </div>
          </div>
        </li>
      </ul>
    </div>

    <!-- Right Column -->
    <div class="col-7 d-flex justify-content-center position-relative">
      <div class="text-center">

        <!-- Recipe Image -->
        <img [src]="recipeImage" draggable="false" style="height: 350px;" class="w-75 rounded-5"
          alt="Blueberry Pancake" />

        <!-- Information Grid -->
        <div class="row mt-4 text-center">

          <!-- Cook Time -->
          <div class="col-5">
            <div class="d-flex align-items-center justify-content-center">
              <i class="fa-solid fa-clock fs-4 me-2"></i>
              <p class="mb-0 fw-bold">Cook time</p>
            </div>
            <p class="mb-0">{{cookTime}}</p>
          </div>

          <!-- Difficulty Level -->
          <div class="col-3">
            <div class="d-flex align-items-center justify-content-center">
              <img src="assets/imgs/819.png" class="icon-style me-2" alt="Cooking Bot Icon" />
              <p class="mb-0 fw-bold">Level</p>
            </div>
            <p class="mb-0">{{mealLevel}}</p>
          </div>

          <!-- Calories -->
          <div class="col-4">
            <div class="d-flex align-items-center justify-content-center">
              <i class="fa fa-fire fs-4 me-2"></i>
              <p class="mb-0 fw-bold">Calories</p>
            </div>
            <p class="mb-0">{{mealCalories}} Cal</p>
          </div>

          <!-- Serve and Special Tags -->
          <div class="row">
            <div class="col-6 mt-4">
              <div class="d-flex align-items-center justify-content-center">
                <i class="fa-solid fa-user fs-4 me-2"></i>
                <p class="mb-0 fw-bold">Serve</p>
              </div>
              <p class="mb-0">{{mealServings}}</p>
            </div>

            <div class="col-6 mt-4">
              <div class="d-flex align-items-center justify-content-start">
                <i class="fa-solid fa-hashtag fs-4 me-2"></i>
                <p class="mb-0 fw-bold">Special tags</p>
              </div>
              <div class="d-flex align-items-center justify-content-start flex-wrap">
                <span class="badge text-light m-1" style="background-color: #00b96d;"
                  *ngFor="let tag of mealSpecialTags">{{tag}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Directions Section -->
  <div class="row m-2 mt-5">
    <h3 class="mb-5" style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">
      Directions
    </h3>

    <!-- Image Section for Directions -->
    <div class="col-4">
      <img [src]="recipeImage" draggable="false" style="height: 300px;" class="w-75 rounded-5"
        alt="Blueberry Pancake" />

      <!-- Comment Section -->
      <div class="d-flex align-items-center mt-4">
        <div class="me-3">
          <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png" alt="Profile"
            class="rounded-circle" width="40" height="40">
        </div>
        <div class="flex-grow-1 position-relative">
          <input [(ngModel)]="newComment" class="form-control rounded-5 pe-5" placeholder="Type your comment"
            (keyup.enter)="addComment()" />

          <!-- Emoji Icon in Comment Box -->
          <span class="position-absolute top-50 end-0 translate-middle-y pe-3">
            <i class="fa fa-smile text-muted"></i>
          </span>
        </div>
      </div>

      <!-- Display Comments -->
      <div class="comments mt-3">
        <h5 class="fw-bold">Comments</h5>
        <div *ngFor="let comment of comments" class="mb-3 p-3 rounded">
          <div class="d-flex align-items-center">
            <div class="me-3">
              <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png"
                alt="Profile" class="rounded-circle" width="40" height="40">
            </div>
            <div>
              <p class="fw-bold mb-1">{{ comment.name }}</p>
              <p class="text-muted mb-0">{{ comment.text }}</p>
            </div>
          </div>

          <!-- Comment Actions: Time, Reply, and Like -->
          <div class="d-flex justify-content-between align-items-center mt-2">
            <div class="d-flex align-items-center gap-3">
              <span class="text-muted">{{ comment.time }}</span>
              <button class="btn btn-link text-muted p-0" style="text-decoration: none;">Reply</button>
            </div>
            <div class="d-flex align-items-center">
              <button class="btn btn-link text-muted p-0 ms-2" style="text-decoration: none;">
                <i class="fa fa-heart"></i> {{ comment.likes }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Step Instructions -->
    <div class="col-4">
      <h4>Step {{ currentStep + 1 }}</h4>
      <p>{{ recipeInstructions[currentStep] }}</p>
    </div>

    <!-- Timer Section -->
    <div class="col-3 d-flex justify-content-end me-2">
      <div class="timer-container text-center">
        <!-- Circular Timer -->
        <svg class="progress-circle" width="120" height="120">
          <!-- Background Circle -->
          <circle class="background-circle" cx="60" cy="60" r="54" stroke="lightgray" stroke-width="5" fill="none">
          </circle>

          <!-- Progress Circle -->
          <circle class="progress-circle-path" cx="60" cy="60" r="54" stroke="black" stroke-width="5" fill="none"
            [attr.stroke-dasharray]="circumference" [attr.stroke-dashoffset]="dashOffset"></circle>
        </svg>

        <!-- Pause/Resume Button -->
        <button id="pause-btn" (click)="togglePause()">
          <i class="fa-solid" [ngClass]="isPaused ? 'fa-play' : 'fa-pause'" style="font-size: 24px;"></i>
        </button>

        <!-- Timer Text and Navigation Buttons -->
        <div class="timer-text mt-5 top-50">
          <p class="p-2"> {{ time }}</p>

          <div class="d-flex justify-content-between gap-2">
            <button class="btn rounded-5 px-3" [ngClass]="{'btn-outline-secondary': currentStep === 0, 'btn': true}"
              [disabled]="currentStep === 0" (click)="prevStep()" style="background-color: #00b96d; color: white;">
              Previous
            </button>
            <button class="btn rounded-5"
              [ngClass]="{'btn-outline-secondary': currentStep === recipeInstructions.length - 1, 'btn': true}"
              [disabled]="currentStep === recipeInstructions.length - 1" (click)="nextStep()"
              style="background-color: #00b96d; color: white;">
              Next
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>